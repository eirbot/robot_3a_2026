/* GLOBALS */
body {
    background-color: #101418; color: #E6EDF3;
    font-family: sans-serif; text-align: center;
    margin: 0; padding: 0; min-height: 100vh;
    display: flex; flex-direction: column;
    box-sizing: border-box; border: 8px solid #333; transition: 0.5s;
}

/* HEADER */
.header {
    background: #1c2128; padding: 15px;
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 2px solid #333;
}
.sys-info { text-align: right; font-size: 0.8em; opacity: 0.8; }

/* DASHBOARD */
.dashboard { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; }
.score-container { display: flex; align-items: center; justify-content: center; gap: 20px; }
.score-box { font-size: 8em; font-weight: bold; color: #C3E88D; min-width: 200px;}
.btn-arrow {
    background: transparent; border: 2px solid #555; color: #aaa;
    font-size: 2em; width: 60px; height: 60px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; transition: 0.2s;
}
.btn-arrow:hover { border-color: white; color: white; background: rgba(255,255,255,0.1); }
.timer-box { font-size: 4em; color: #F8E16C; font-family: monospace; margin-top: 20px; font-weight: bold;}
.team-box { font-size: 2em; padding: 10px 30px; border-radius: 10px; font-weight: bold; }

/* TIRETTE STATUS */
.tirette-box {
    margin-top: 10px;
    padding: 10px 20px;
    border-radius: 8px;
    font-weight: bold;
    font-size: 1.1em;
    color: white;
    text-transform: uppercase;
}
.status-non-armed { background-color: #d32f2f; box-shadow: 0 0 10px rgba(211, 47, 47, 0.5); }
.status-armed { background-color: #2e7d32; box-shadow: 0 0 10px rgba(46, 125, 50, 0.5); animation: blink 1s infinite; }
.status-triggered { background-color: #FF9800; color: black; }

@keyframes blink {
    50% { opacity: 0.7; }
}

/* CONSOLE SERIE */
#serial-output::-webkit-scrollbar { width: 8px; }
#serial-output::-webkit-scrollbar-thumb { background: #444; border-radius: 4px; }
#serial-output::-webkit-scrollbar-track { background: #222; }

/* LIVE LOGS TERMINAL */
.log-terminal {
    background-color: #000;
    border: 1px solid #333;
    border-radius: 5px;
    height: 250px;           /* Hauteur fixe */
    overflow-y: auto;        /* Scroll automatique */
    padding: 10px;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 0.9em;
    text-align: left;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.log-line {
    border-bottom: 1px solid #111;
    padding-bottom: 2px;
}

.log-time {
    color: #666;
    margin-right: 10px;
    font-size: 0.8em;
}

/* Couleurs selon le type de message */
.log-info { color: #00E676; }   /* Vert Matrix */
.log-error { color: #FF5252; font-weight: bold; } /* Rouge Alerte */

/* STATUT PERIPHERIQUES */
.dev-status {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding: 5px;
    border-bottom: 1px solid #333;
}

.status-dot {
    width: 15px;
    height: 15px;
    border-radius: 50%;
    background-color: #444; /* Gris par défaut (Inconnu) */
    box-shadow: 0 0 5px rgba(0,0,0,0.5);
    transition: background-color 0.3s;
}

.status-ok {
    background-color: #00E676; /* Vert */
    box-shadow: 0 0 8px #00E676;
}

.status-err {
    background-color: #F44336; /* Rouge */
    box-shadow: 0 0 8px #F44336;
}

/* BOUTONS */
.controls { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 10px; background: rgba(0,0,0,0.2); }
button, .btn-debug, .btn-nav, .btn-back, .btn-flash, .btn-led {
    padding: 15px; font-size: 1.1em; border: none; border-radius: 5px;
    cursor: pointer; color: white; font-weight: bold; text-decoration: none;
    display: flex; justify-content: center; align-items: center;
}
.btn-start { background: #28a745; grid-column: span 2; font-size: 1.5em; }
.btn-stop { background: #d32f2f; grid-column: span 2; font-size: 1.5em; }
.btn-reset { background: #FF9800; grid-column: span 2; font-size: 1.5em; color: black;} /* NOUVEAU */
.btn-team { background: #0288D1; }
.btn-debug { background: #455A64; }
.btn-sys { background: #37474F; font-size: 0.9em; }
.hidden { display: none !important; }

/* NAVIGATION MAP & MEDIA */
.btn-nav {
    background-color: #455A64; color: white;
    width: 100%; box-sizing: border-box; /* Important pour pas dépasser */
    margin-top: 10px;
}
.btn-nav:hover { background-color: #546E7A; }

/* LEDS */
.btn-led { background: linear-gradient(135deg, #673AB7, #512DA8); width: 100%; margin-top: 5px;}

/* SWITCHS */
.switch-row { display: flex; justify-content: space-between; margin-bottom: 15px; font-size: 1.1em; }
input[type="checkbox"] { transform: scale(1.5); }
.btn-flash { background-color: #FF9800; color: black; flex: 1; }
.btn-tiny { padding: 5px 8px; font-size: 0.8em; background: #444; border: 1px solid #666; color: white; margin-right: 2px;}

/* CAMERA FEED */
.camera-container {
    background-color: #000;
    border: 2px solid #444;
    border-radius: 5px;
    
    width: 60%;           /* Prend toute la largeur disponible */
    aspect-ratio: 16/9;   /* Force le format "Caméra Standard" (ou met 16/9) */
    /* Pas de height fixe ! On laisse le ratio décider */
    
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    position: relative;
}

#cam-feed {
    width: 100%;
    height: 100%;
    object-fit: contain; /* L'image s'adapte sans être déformée */
    background: #111;    /* Fond gris foncé si l'image est plus petite */
}

/* Style pour le message d'erreur (quand pas de cam) */
.cam-error {
    color: #F44336;
    font-weight: bold;
    font-size: 1.2em;
    text-align: center;
    border: 1px dashed #F44336;
    padding: 20px;
    border-radius: 10px;
}

/* THEMES */
body.mode-BLEUE { border-color: #2196F3; background: radial-gradient(circle at center, #0D1B2A 0%, #000 100%); }
body.mode-BLEUE .header { background: #1565C0; }
body.mode-JAUNE { border-color: #FFD600; background: radial-gradient(circle at center, #1F1D0A 0%, #000 100%); }
body.mode-JAUNE .header { background: #FBC02D; color: black; }

/* ANIMATION FIN */
body.breathing-BLEUE { animation: breathe-blue 2s infinite ease-in-out; }
@keyframes breathe-blue {
    0% { background-color: #000; box-shadow: inset 0 0 20px #2196F3; }
    50% { background-color: #0D47A1; box-shadow: inset 0 0 100px #2196F3; }
    100% { background-color: #000; box-shadow: inset 0 0 20px #2196F3; }
}
body.breathing-JAUNE { animation: breathe-yellow 2s infinite ease-in-out; }
@keyframes breathe-yellow {
    0% { background-color: #000; box-shadow: inset 0 0 20px #FFEB3B; }
    50% { background-color: #F57F17; box-shadow: inset 0 0 100px #FFEB3B; }
    100% { background-color: #000; box-shadow: inset 0 0 20px #FFEB3B; }
}

/* CARDS & MAP */
.card { background: #1c232b; padding: 20px; border-radius: 10px; margin-bottom: 10px; }
.debug-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 20px; }
#map-container { flex-grow: 1; background: #222; display: flex; justify-content: center; align-items: center; position: relative; }
canvas { background: #eee; border-radius: 4px; }
.info-pos { position: absolute; bottom: 20px; background: rgba(0,0,0,0.7); padding: 5px 15px; border-radius: 20px; }

/* CARDS & MAP */
.card { background: #1c232b; padding: 20px; border-radius: 10px; margin-bottom: 10px; }
.debug-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 20px; }
#map-container { flex-grow: 1; background: #222; display: flex; justify-content: center; align-items: center; position: relative; }

/* CANVAS SOMBRE */
canvas { 
    background: #1c232b; /* FOND SOMBRE */
    border-radius: 4px; 
    box-shadow: 0 0 10px #000;
}

.info-pos { position: absolute; bottom: 20px; background: rgba(0,0,0,0.7); padding: 5px 15px; border-radius: 20px; }