<!DOCTYPE html>
<html>
<head>
    <title>EIRBOT - MEDIA STUDIO</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/common.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/media.css') }}">
    
    <script src="{{ url_for('static', filename='js/socket.io.js') }}"></script>
    <script src="{{ url_for('static', filename='js/common.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/media.js') }}" defer></script>
</head>
<body>
    <div class="header">
        <a href="/" class="btn-back">â¬… RETOUR</a>
        <div style="font-weight:900; font-size:1.5em;">MEDIA STUDIO</div>
        <div class="sys-info" id="sys-info">...</div>
    </div>

    <div class="media-container">
        
        <div class="panel-left">
            <div class="panel-header">
                <h3>ğŸ“‚ Fichiers Audio</h3>
                <small>Glisser-dÃ©poser pour uploader</small>
            </div>
            
            <div id="file-list" class="file-list">
                <div class="empty-msg">Chargement...</div>
            </div>
        </div>

        <div class="panel-right">
            
            <div class="player-box">
                <h3>ğŸµ Lecteur</h3>
                <div class="now-playing" id="now-playing-text">Aucune lecture</div>
                
                <audio id="audio-preview" controls style="width:100%; margin: 15px 0;"></audio>
                
                <div class="player-controls">
                    <button class="btn-ctrl" onclick="playPrev()">â®</button>
                    <button class="btn-ctrl" onclick="playNext()">â­</button>
                </div>
                
                <label style="display:block; margin-top:10px;">
                    Volume PrÃ©-Ã©coute : 
                    <input type="range" id="vol-slider" min="0" max="1" step="0.1" value="0.5">
                </label>
                
                <button class="btn-robot-test" onclick="playOnRobot()" style="margin-top:15px;">ğŸ“¢ Tester sur le Robot</button>
            </div>

            <div class="config-box">
                <h3>âš™ï¸ Assignations Robot</h3>
                <div class="assign-row">
                    <span>ğŸ¬ INTRO :</span> <span id="assign-intro" class="assign-val">...</span>
                </div>
                <div class="assign-row">
                    <span>ğŸ” MATCH :</span> <span id="assign-match_loop" class="assign-val">...</span>
                </div>
                <div class="assign-row">
                    <span>ğŸ FIN :</span> <span id="assign-outro" class="assign-val">...</span>
                </div>
            </div>

            <div class="led-box">
                <h3>ğŸ’¡ LumiÃ¨res</h3>
                <div class="led-controls">
                    <button onclick="setLed('OFF')">OFF</button>
                    <button onclick="setLed('RED')">ROUGE</button>
                    <button onclick="setLed('GREEN')">VERT</button>
                    <button onclick="setLed('BLUE')">BLEU</button>
                    <button onclick="setLed('RAINBOW')">ğŸŒˆ AUTO</button>
                </div>
            </div>
        </div>
    </div>

    <div id="context-menu" class="context-menu">
        <div class="ctx-title" id="ctx-filename">Fichier.mp3</div>
        <hr>
        <div class="ctx-item" onclick="assignTrack('intro')">ğŸ¬ DÃ©finir comme INTRO</div>
        <div class="ctx-item" onclick="assignTrack('match_loop')">ğŸ” DÃ©finir comme MATCH LOOP</div>
        <div class="ctx-item" onclick="assignTrack('outro')">ğŸ DÃ©finir comme OUTRO</div>
        <hr>
        <div class="ctx-item delete" onclick="deleteTrack()">ğŸ—‘ï¸ Supprimer (TODO)</div>
    </div>

</body>
</html>